# 手机测试指南

## 🚀 快速开始

### 方法一：使用默认配置（推荐）

1. **启动开发服务器**
   ```bash
   pnpm run dev
   ```

2. **查看网络地址**
   启动后，终端会显示：
   ```
   ➜  Local:   http://localhost:5173/
   ➜  Network: http://你的IP地址:5173/
   ```

3. **在手机上访问**
   - 确保手机和电脑连接在**同一个 WiFi 网络**
   - 在手机浏览器中输入：`http://你的IP地址:5173/`
   - 例如：`http://172.16.21.238:5173/`

### 方法二：使用 --host 参数

如果方法一不显示 Network 地址，使用：

```bash
pnpm run dev:host
```

## 📱 手机测试步骤

### 1. 检查网络连接

确保手机和电脑在同一 WiFi：

**Mac 查看 IP：**
```bash
ifconfig | grep "inet " | grep -v 127.0.0.1
```

**Windows 查看 IP：**
```bash
ipconfig
```

查找类似 `192.168.x.x` 或 `172.16.x.x` 的地址。

### 2. 启动开发服务器

```bash
pnpm run dev
```

### 3. 在手机上访问

1. 打开手机浏览器（Safari、Chrome 等）
2. 输入显示的 Network 地址
3. 例如：`http://172.16.21.238:5173/`

### 4. 测试 PWA 功能

1. **添加到主屏幕**：
   - iOS Safari：点击分享按钮 → 添加到主屏幕
   - Android Chrome：点击菜单 → 添加到主屏幕

2. **测试离线功能**：
   - 添加到主屏幕后
   - 关闭 WiFi
   - 打开应用，应该能正常使用

## 🔧 常见问题

### Q: 手机无法访问？

**检查清单：**
1. ✅ 手机和电脑在同一 WiFi 网络
2. ✅ 防火墙允许 5173 端口
3. ✅ 使用正确的 IP 地址（不是 localhost）
4. ✅ 开发服务器正在运行

**Mac 防火墙设置：**
1. 系统设置 → 网络 → 防火墙
2. 确保允许 Node.js 或 Vite 通过防火墙

**Windows 防火墙设置：**
1. 控制面板 → Windows Defender 防火墙
2. 允许应用通过防火墙
3. 添加 Node.js 或端口 5173

### Q: 如何找到我的 IP 地址？

**Mac/Linux:**
```bash
ifconfig | grep "inet " | grep -v 127.0.0.1
```

**Windows:**
```bash
ipconfig
```

查找 "IPv4 地址" 或 "inet" 后面的地址。

### Q: 端口被占用？

如果 5173 端口被占用，Vite 会自动尝试下一个端口（5174, 5175...）。

或者手动指定端口：
```bash
pnpm run dev -- --port 3000
```

### Q: 手机访问很慢？

1. 确保手机和电脑在同一 WiFi（不是手机热点）
2. 检查网络速度
3. 首次加载会慢一些，后续会快很多（PWA 缓存）

### Q: HTTPS 要求？

PWA 的某些功能（如 Service Worker）需要 HTTPS。在开发环境中：
- `localhost` 和 `127.0.0.1` 可以使用 HTTP
- 其他 IP 地址可能需要 HTTPS

**解决方案：**
1. 使用 `localhost` 的 IP 地址（127.0.0.1）
2. 或者配置 HTTPS（较复杂）

## 📊 测试清单

- [ ] 手机可以访问页面
- [ ] 页面正常显示
- [ ] 点击按钮可以加载推荐
- [ ] 刷新功能正常
- [ ] 按钮状态正确（刷新后显示"再换就饿了"）
- [ ] 可以添加到主屏幕
- [ ] 离线可以访问（PWA 功能）

## 🔍 调试技巧

### 1. 使用手机浏览器开发者工具

**Chrome（Android）：**
1. 在电脑 Chrome 输入：`chrome://inspect`
2. 连接手机并启用 USB 调试
3. 可以看到手机上的页面并调试

**Safari（iOS）：**
1. iPhone 设置 → Safari → 高级 → Web 检查器
2. Mac Safari → 开发 → [你的 iPhone] → 选择页面
3. 可以调试手机上的页面

### 2. 查看控制台日志

在手机浏览器中：
- 虽然不能直接看到控制台
- 但可以通过远程调试工具查看
- 或者使用 `alert()` 临时调试

### 3. 检查网络请求

使用远程调试工具查看：
- Network 请求是否成功
- 是否有错误
- 资源加载情况

## 💡 提示

1. **首次测试建议**：
   - 先用电脑浏览器测试功能
   - 确认无误后再在手机上测试

2. **PWA 测试**：
   - 添加到主屏幕后测试
   - 测试离线功能
   - 测试 Service Worker

3. **性能优化**：
   - 手机网络可能较慢
   - 首次加载会慢一些
   - 后续访问会快很多（缓存）
